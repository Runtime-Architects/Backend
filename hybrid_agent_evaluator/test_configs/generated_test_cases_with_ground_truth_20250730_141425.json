{
  "metadata": {
    "evaluation_framework": "enhanced_multi_instance_with_ground_truth",
    "created_date": "2025-07-30T14:14:25.213201",
    "source_config": "test_configs/multi_instance_test_cases.json",
    "total_test_cases": 7,
    "evaluation_settings": {}
  },
  "test_cases": [
    {
      "id": "carbon_001_basic",
      "query": "What is the best time to use my appliances today in Ireland?",
      "query_date": "2025-07-30",
      "expected_functions": [
        "get_emission_analysis"
      ],
      "expected_behavior": [
        "correct_function_call",
        "consistent_output"
      ],
      "expected_output_keywords": [
        "time",
        "appliances",
        "Ireland",
        "co2",
        "intensity"
      ],
      "category": "basic_query",
      "priority": "high",
      "timeout_seconds": 60,
      "domain_context": "Carbon emissions optimization for appliance usage in Ireland",
      "available_functions": [
        "get_emission_analysis"
      ],
      "ground_truth": {
        "reference_output": "üè† **Best Times to Use Appliances in Ireland Today (Based on REAL EirGrid Data):**\n\nüå± **Optimal Period (Lowest Real CO2):**\n- **10:00-13:00**: 199-209g CO2/kWh (REAL EirGrid data)\n- Perfect for washing machine, dishwasher, and EV charging\n\n‚ö° **Specific Appliance Recommendations (Real Data-Based):**\n‚Ä¢ **Washing Machine**: Start cycle at 10:00\n‚Ä¢ **Dishwasher**: Schedule for 10:00-13:00\n‚Ä¢ **Electric Vehicle Charging**: Begin charging during real low-emission window\n‚Ä¢ **Tumble Dryer**: Use during optimal period\n\nüî• **Avoid High Real Emission Times:**\n- **04:00-07:00**: 250-260g CO2/kWh (real peak demand data)\n\nüìä **Today's REAL EirGrid CO2 Data:**\n- Minimum: 199g CO2/kWh (real measurement)\n- Maximum: 260g CO2/kWh (real measurement)  \n- Daily Average: 221g CO2/kWh (real average)\n\nüåç **Environmental Impact**: Using appliances during optimal times reduces your carbon footprint by up to 23% compared to peak times (calculated from real data)!",
        "scoring_criteria": {
          "content_requirements": {
            "must_have": [
              "specific optimal time period mentioned (e.g., 10:00-13:00)",
              "real carbon intensity values (must be within 199-260g CO2/kWh range)",
              "at least 3 specific appliances mentioned",
              "comparison between optimal and peak times",
              "clear time recommendations in HH:MM format"
            ],
            "should_have": [
              "environmental impact statement with percentage",
              "clear visual structure",
              "daily overview with real min/max/average values",
              "actionable scheduling advice",
              "Ireland context mentioned"
            ],
            "format_requirements": [
              "Time ranges in HH:MM-HH:MM format",
              "CO2 values in g CO2/kWh format",
              "At least 3 appliance recommendations",
              "Clear structure with sections"
            ]
          },
          "scoring_weights": {
            "accuracy_vs_real_data": 0.3,
            "completeness": 0.25,
            "clarity": 0.2,
            "actionability": 0.15,
            "format": 0.1
          },
          "penalty_conditions": [
            "no specific times mentioned: -0.15",
            "no appliances mentioned: -0.15",
            "no real carbon intensity values (must be in 199-260g CO2/kWh range): -0.20",
            "response under 300 characters: -0.10",
            "wrong time format (not HH:MM): -0.05",
            "no comparison between optimal/peak times: -0.10",
            "incorrect real CO2 values (outside 199-260g CO2/kWh range): -0.20",
            "no mention of real/actual/live data: -0.10"
          ]
        }
      }
    },
    {
      "id": "carbon_002_ev",
      "query": "When should I charge my electric vehicle for minimal carbon footprint?",
      "query_date": "2025-07-30",
      "expected_functions": [
        "get_emission_analysis"
      ],
      "expected_behavior": [
        "correct_function_call"
      ],
      "expected_output_keywords": [
        "charge",
        "carbon",
        "footprint",
        "time"
      ],
      "category": "ev_charging",
      "priority": "high",
      "timeout_seconds": 60,
      "domain_context": "EV charging optimization based on real-time carbon intensity",
      "available_functions": [
        "get_emission_analysis"
      ],
      "ground_truth": {
        "reference_output": "üîã **Optimal EV Charging Schedule Based on REAL EirGrid Data:**\n\nüå± **Best Charging Window (Real CO2 Data):**\n- **10:00-13:00**: Lowest real carbon intensity (199-209g CO2/kWh)\n- Based on current EirGrid compressed data measurements\n\n‚ö° **EV Charging Strategy (Real Data-Based):**\n‚Ä¢ **Immediate charging needed**: If below 20% battery, charge now\n‚Ä¢ **Planned charging**: Set timer to start at 10:00 (real optimal time)\n‚Ä¢ **Full daytime charge**: Begin at 10:00 for complete charge during low emissions\n‚Ä¢ **Top-up charging**: Use any time during 10:00-13:00 window\n\nüî• **Avoid These Real High Emission Times:**\n- **04:00-07:00**: Peak grid demand (250-260g CO2/kWh) from real data\n\nüìä **Today's Real CO2 Intensity Range:**\n- Minimum: 199g CO2/kWh\n- Maximum: 260g CO2/kWh\n- Daily Average: 221g CO2/kWh\n\nüåç **Environmental Benefit**: Charging during optimal hours reduces your EV's carbon footprint by 23% compared to peak times (calculated from today's real EirGrid data)!",
        "scoring_criteria": {
          "content_requirements": {
            "must_have": [
              "specific optimal charging time window mentioned (e.g., 10:00-13:00)",
              "real carbon intensity values (must be within 199-260g CO2/kWh range)",
              "EV charging specific advice",
              "comparison between optimal and peak times",
              "clear time recommendations in HH:MM format"
            ],
            "should_have": [
              "environmental impact statement with percentage",
              "battery charging strategies (immediate vs planned)",
              "daily CO2 intensity overview",
              "actionable EV charging advice",
              "mention of real/actual/live data source"
            ],
            "format_requirements": [
              "Time ranges in HH:MM-HH:MM format",
              "CO2 values in g CO2/kWh format",
              "EV-specific charging recommendations",
              "Clear structure with sections"
            ]
          },
          "scoring_weights": {
            "accuracy_vs_real_data": 0.3,
            "completeness": 0.25,
            "clarity": 0.2,
            "actionability": 0.15,
            "format": 0.1
          },
          "penalty_conditions": [
            "no specific times mentioned: -0.15",
            "no EV charging advice: -0.15",
            "no real carbon intensity values (must be in 199-260g CO2/kWh range): -0.20",
            "response under 300 characters: -0.10",
            "wrong time format (not HH:MM): -0.05",
            "no comparison between optimal/peak times: -0.10",
            "incorrect real CO2 values (outside 199-260g CO2/kWh range): -0.20",
            "no mention of real/actual/live data: -0.10"
          ]
        }
      }
    },
    {
      "id": "carbon_003_data",
      "query": "Show me CO2 intensity data for the next 24 hours in Republic of Ireland",
      "query_date": "2025-07-30",
      "expected_functions": [
        "get_emission_analysis"
      ],
      "expected_behavior": [
        "correct_function_call"
      ],
      "expected_output_keywords": [
        "co2",
        "intensity",
        "24 hours",
        "ireland"
      ],
      "category": "data_request",
      "priority": "medium",
      "timeout_seconds": 90,
      "domain_context": "Carbon intensity data forecast for Republic of Ireland",
      "available_functions": [
        "get_emission_analysis"
      ],
      "ground_truth": {
        "reference_output": "üìä **REAL CO2 Intensity Data - Ireland (Based on EirGrid Measurements)**\n\nüïê **24-Hour Real Data Breakdown:**\n\n**üåô Overnight (Real EirGrid Data):**\n- 00:00-06:00: 239g CO2/kWh ‚ö†Ô∏è (real measurements)\n- Optimal window: 10:00-13:00 (199-209g CO2/kWh) - confirmed lowest real emissions\n\n**üåÖ Morning (Real Grid Data):**\n- 06:00-12:00: 219g CO2/kWh üå± (real EirGrid measurements)\n\n**‚òÄÔ∏è Afternoon (Live Data):**\n- 12:00-18:00: 207g CO2/kWh üå± (current EirGrid readings)\n\n**üåÜ Evening (Real Peak Data):**\n- 18:00-24:00: 216g CO2/kWh üå± (real measurements)\n\n**üìà Real Daily Summary (EirGrid Data):**\n- **Minimum**: 199g CO2/kWh (cleanest real grid measurement)\n- **Maximum**: 260g CO2/kWh (highest real emission reading)\n- **Daily Average**: 221g CO2/kWh (calculated from real data)\n- **Data Source**: Compressed EirGrid CO2 intensity measurements",
        "scoring_criteria": {
          "content_requirements": {
            "must_have": [
              "specific optimal time period mentioned (e.g., 10:00-13:00)",
              "real carbon intensity values (must be within 199-260g CO2/kWh range)",
              "at least 3 specific appliances mentioned",
              "comparison between optimal and peak times",
              "clear time recommendations in HH:MM format"
            ],
            "should_have": [
              "environmental impact statement with percentage",
              "clear visual structure",
              "daily overview with real min/max/average values",
              "actionable scheduling advice",
              "Ireland context mentioned"
            ],
            "format_requirements": [
              "Time ranges in HH:MM-HH:MM format",
              "CO2 values in g CO2/kWh format",
              "At least 3 appliance recommendations",
              "Clear structure with sections"
            ]
          },
          "scoring_weights": {
            "accuracy_vs_real_data": 0.3,
            "completeness": 0.25,
            "clarity": 0.2,
            "actionability": 0.15,
            "format": 0.1
          },
          "penalty_conditions": [
            "no specific times mentioned: -0.15",
            "no appliances mentioned: -0.15",
            "no real carbon intensity values (must be in 199-260g CO2/kWh range): -0.20",
            "response under 300 characters: -0.10",
            "wrong time format (not HH:MM): -0.05",
            "no comparison between optimal/peak times: -0.10",
            "incorrect real CO2 values (outside 199-260g CO2/kWh range): -0.20",
            "no mention of real/actual/live data: -0.10"
          ]
        }
      }
    },
    {
      "id": "carbon_004_irrelevant",
      "query": "What's the weather like today?",
      "query_date": "2025-07-30",
      "expected_functions": [],
      "expected_behavior": [
        "consistent_output"
      ],
      "expected_output_keywords": [
        "weather"
      ],
      "category": "irrelevant_query",
      "priority": "low",
      "timeout_seconds": 30,
      "domain_context": "Non-carbon related query - should not use emission functions",
      "available_functions": [
        "get_emission_analysis"
      ],
      "ground_truth": {
        "reference_output": "I appreciate your question, but I'm specialized in providing carbon emissions and energy data for Ireland. I can help you with:\n\n‚Ä¢ Optimal times to use appliances based on carbon intensity\n‚Ä¢ EV charging recommendations for minimal emissions\n‚Ä¢ Real-time CO2 intensity data from EirGrid\n‚Ä¢ Historical carbon emission patterns\n‚Ä¢ Regional comparisons within Ireland\n\nFor weather information, I'd recommend checking a dedicated weather service. Is there anything related to carbon emissions or energy usage I can help you with instead?",
        "scoring_criteria": {
          "content_requirements": {
            "must_have": [
              "appropriate response indicating query is outside domain",
              "polite redirection or explanation"
            ],
            "should_have": [
              "explanation that the system focuses on carbon emissions",
              "suggestion to ask carbon-related questions"
            ],
            "format_requirements": [
              "Clear communication",
              "Professional tone"
            ]
          },
          "scoring_weights": {
            "accuracy_vs_real_data": 0.3,
            "completeness": 0.25,
            "clarity": 0.2,
            "actionability": 0.15,
            "format": 0.1
          },
          "penalty_conditions": [
            "attempts to answer weather/non-carbon query: -0.30",
            "uses get_emission_analysis for non-carbon query: -0.40",
            "no clear indication of domain limits: -0.10"
          ]
        }
      }
    },
    {
      "id": "carbon_005_comparison",
      "query": "Compare carbon intensity between ROI and Northern Ireland",
      "query_date": "2025-07-30",
      "expected_functions": [
        "get_emission_analysis"
      ],
      "expected_behavior": [
        "correct_function_call"
      ],
      "expected_output_keywords": [
        "carbon",
        "intensity",
        "roi",
        "northern ireland",
        "compare"
      ],
      "category": "comparison_query",
      "priority": "medium",
      "timeout_seconds": 90,
      "domain_context": "Regional comparison of carbon intensity between ROI and NI",
      "available_functions": [
        "get_emission_analysis"
      ],
      "ground_truth": {
        "reference_output": "üîç **Carbon Intensity Comparison: ROI vs Northern Ireland**\n\n**üìä Current Data Comparison:**\n\n**üáÆüá™ Republic of Ireland:**\n- Current Intensity: 207g CO2/kWh\n- Daily Range: 199-260g CO2/kWh\n- Optimal Period: 10:00-13:00 (199-209g CO2/kWh)\n\n**üè¥Û†ÅßÛ†Å¢Û†ÅÆÛ†Å©Û†Å≤Û†Åø Northern Ireland:**\n- Current Intensity: 222g CO2/kWh (typically 10-20g higher)\n- Daily Range: 209-270g CO2/kWh\n- Optimal Period: 10:00-13:00 (similar patterns)\n\n**üîÑ Key Differences:**\n‚Ä¢ ROI generally has 10-15g CO2/kWh lower emissions due to higher wind generation\n‚Ä¢ Both regions share similar daily patterns with optimal times during 10:00-13:00\n‚Ä¢ ROI benefits from interconnection with cleaner European grids\n\n**üìà Recommendation:** For minimal carbon footprint, use appliances during 10:00-13:00 in both regions, with ROI showing slightly better performance.",
        "scoring_criteria": {
          "content_requirements": {
            "must_have": [
              "data for both regions mentioned (ROI and Northern Ireland)",
              "carbon intensity values within 199-260g CO2/kWh range",
              "clear comparison between regions"
            ],
            "should_have": [
              "specific time periods for comparison",
              "explanation of differences",
              "data source mentioned"
            ],
            "format_requirements": [
              "Side-by-side comparison or clear distinction",
              "CO2 values in g CO2/kWh format",
              "Regional labels clearly shown"
            ]
          },
          "scoring_weights": {
            "accuracy_vs_real_data": 0.3,
            "completeness": 0.25,
            "clarity": 0.2,
            "actionability": 0.15,
            "format": 0.1
          },
          "penalty_conditions": [
            "no comparison provided: -0.25",
            "missing data for one region: -0.20",
            "incorrect CO2 values (outside 199-260g range): -0.20"
          ]
        }
      }
    },
    {
      "id": "carbon_006_consistency",
      "query": "Give me a statistical summary of last week carbon emission in Ireland",
      "query_date": "2025-07-23",
      "expected_functions": [
        "get_emission_analysis"
      ],
      "expected_behavior": [
        "correct_function_call"
      ],
      "expected_output_keywords": [
        "statistical",
        "summary",
        "carbon",
        "emission",
        "ireland"
      ],
      "category": "analysis_query",
      "priority": "high",
      "timeout_seconds": 120,
      "domain_context": "Historical analysis of carbon emissions for Ireland",
      "available_functions": [
        "get_emission_analysis"
      ],
      "ground_truth": {
        "reference_output": "üìà **Statistical Summary: Ireland Carbon Emissions (Last Week)**\n\n**üìä Weekly Statistics:**\n- **Average Intensity:** 211g CO2/kWh\n- **Minimum Recorded:** 194g CO2/kWh (typically Sunday 03:00)\n- **Maximum Recorded:** 275g CO2/kWh (typically Thursday 18:30)\n- **Daily Variance:** ¬±30g CO2/kWh\n\n**üìÖ Daily Breakdown (Last Week):**\n- **Monday:** 216g avg, peak: 17:30 (260g)\n- **Tuesday:** 219g avg, peak: 18:00 (270g)\n- **Wednesday:** 214g avg, peak: 17:45 (255g)\n- **Thursday:** 223g avg, peak: 18:30 (275g)\n- **Friday:** 218g avg, peak: 19:00 (265g)\n- **Saturday:** 203g avg, lowest weekly emissions\n- **Sunday:** 196g avg, best day for high-energy activities\n\n**üîç Key Patterns:**\n‚Ä¢ Weekday evenings show highest emissions (17:00-19:00)\n‚Ä¢ Weekend mornings optimal for appliance usage\n‚Ä¢ 23% improvement possible by timing optimization",
        "scoring_criteria": {
          "content_requirements": {
            "must_have": [
              "statistical summary with min/max/average values",
              "carbon values within realistic range (199-260g CO2/kWh)",
              "time period clearly specified (last week)"
            ],
            "should_have": [
              "trend analysis or patterns",
              "peak and off-peak identification",
              "daily breakdowns or aggregations"
            ],
            "format_requirements": [
              "Structured statistical presentation",
              "Clear numerical values",
              "Time period labels"
            ]
          },
          "scoring_weights": {
            "accuracy_vs_real_data": 0.3,
            "completeness": 0.25,
            "clarity": 0.2,
            "actionability": 0.15,
            "format": 0.1
          },
          "penalty_conditions": [
            "no statistical values provided: -0.25",
            "wrong time period (not last week): -0.20",
            "missing key statistics (min/max/avg): -0.15",
            "unrealistic values (outside 199-260g range): -0.20"
          ]
        }
      }
    },
    {
      "id": "carbon_007_error_handling",
      "query": "Get carbon data for invalid date 2025-13-45",
      "query_date": "2025-07-30",
      "expected_functions": [
        "get_emission_analysis"
      ],
      "expected_behavior": [
        "proper_error_handling"
      ],
      "expected_output_keywords": [
        "error",
        "invalid",
        "date"
      ],
      "category": "error_handling",
      "priority": "medium",
      "timeout_seconds": 60,
      "domain_context": "Error handling test with invalid date format",
      "available_functions": [
        "get_emission_analysis"
      ],
      "ground_truth": {
        "reference_output": "I noticed there's an issue with the date format in your request. The date \"2025-13-45\" appears to be invalid as:\n\n‚Ä¢ Month \"13\" doesn't exist (valid range: 01-12)\n‚Ä¢ Day \"45\" doesn't exist in any month (valid range: 01-31)\n\nPlease provide a valid date in one of these formats:\n‚Ä¢ YYYY-MM-DD (e.g., 2025-07-30)\n‚Ä¢ DD/MM/YYYY (e.g., 30/07/2025)\n\nI can provide carbon intensity data for any valid date within the available range. Would you like to try again with a corrected date?",
        "scoring_criteria": {
          "content_requirements": {
            "must_have": [
              "error detection and appropriate error message",
              "clear explanation of the issue"
            ],
            "should_have": [
              "helpful suggestion for correction",
              "professional error handling"
            ],
            "format_requirements": [
              "Clear error message",
              "User-friendly explanation"
            ]
          },
          "scoring_weights": {
            "accuracy_vs_real_data": 0.3,
            "completeness": 0.25,
            "clarity": 0.2,
            "actionability": 0.15,
            "format": 0.1
          },
          "penalty_conditions": [
            "no error detection: -0.40",
            "crashes or throws exception: -0.50",
            "provides data for invalid date: -0.30"
          ]
        }
      }
    }
  ]
}